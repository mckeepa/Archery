<!DOCTYPE html>
<html>
<head>
	<title>
		
	</title>
</head>
<body>
	<h1>Hello</h1>
	<canvas id="canvas" width="1000" height="1000" style="border:1px solid #000000;"></canvas>
	<div id="shots"></div>

	<script>
		var shots = [];
		var target = {
			  x: 200,
			  y: 200,
			  r: 200 / 2,
			}


		document.getElementsByTagName("BODY")[0].onresize = function(){
			console.log("OuterWidth: " + window.outerWidth);
			console.log("outerHeight: " + window.outerHeight);
			console.log("innerHeight: " + window.innerHeight);
			drawTarget();
			ShowShowsOnTarget(shots)
		};
		
		drawTarget();

		function drawTarget(){

			var viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0) -30;
			var viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);

			var canvas = document.getElementById("canvas")
			canvas.width = viewportWidth;
			var ctx = canvas.getContext("2d")


			var w = viewportWidth;// canvas.width
			var h = canvas.height
			//h=w;

			var Radius = 300;

			target = {
			  x: w / 2,
			  y: h / 2,
			  r: w / 2,
			};

		
			var scores =  [
				{score: 10, colour:"gold"},
			 	{score: 9, colour:"gold"},
				{score: 8, colour:"red"},
				{score: 7, colour:"red"},
				{score: 6, colour:"blue"},
				{score: 5, colour:"blue"},
				{score: 4, colour:"black"},
				{score: 3, colour:"black"},
				{score: 2, colour:"white"},
				{score: 1, colour:"white"},
				//{score: 0, colour:"black"}
				];


			for (var i = scores.length - 1; i >= 0; i--) {
				scores[i].radius = (target.r/scores.length)*(i+1);

				ctx.beginPath()
				ctx.fillStyle = scores[i].colour
				ctx.arc(target.x, target.y, scores[i].radius, 0, Math.PI*2, false)
				ctx.fill()
				ctx.lineWidth = 1;
	      		ctx.strokeStyle = '#003300';
				ctx.stroke();
				ctx.closePath()
			
			};

			
			// ctx.beginPath()
			// ctx.fillStyle = "blue"
			// ctx.arc(500, 200, 20, 0, Math.PI*2, false)
			// ctx.fill()
			// ctx.closePath()
		
			window.onmousedown = function(e) {
			    x1 = e.pageX - canvas.getBoundingClientRect().left
			    y1 = e.pageY - canvas.getBoundingClientRect().top
				
				var shot = {
					x : x1-window.scrollX,
				    y : y1-window.scrollY,
				    score : 0,
				};
				shot.TargetCenterX = target.x;
				shot.TargetCenterY = target.y;
				shot.radius = Math.sqrt(
							Math.pow((shot.x-target.x), 2) + 
							Math.pow((shot.y-target.y), 2) 
						)
			
				
				for (var i = scores.length - 1; i >= 0; i--) {
		
				    if (shot.radius < scores[i].radius && shot.score < scores[i].score) {
				    		shot.score =scores[i].score;
				    }
				}

				//alert("Shot: " + shot.score)

				//shots[0] =shot;
			    shots.push(shot);
			    RefreshShotsList(shots);
			    ShowShowsOnTarget(shots);
			}
		};

		function ShowShowsOnTarget(shots){
			var canvas = document.getElementById("canvas")
			var context = canvas.getContext("2d")
			
			for (var i = shots.length - 1; i >= 0; i--) {
				var x = (shots[i].x/shots[i].TargetCenterX) * target.x;
				var y = (shots[i].y/shots[i].TargetCenterY) * target.y;

				context.beginPath();
				context.lineWidth = 3;
      			context.moveTo(x-4,y);
				context.lineTo(x+4,y);
				context.moveTo(x,y-4);
				context.lineTo(x,y+4);
				context.strokeStyle = "grey";//"rgb(255,255,255)";
				context.stroke();  
				context.closePath()
		
			};

		
		}

		function  RefreshShotsList(shots){
			var html = "<ul>";
			for (var i = shots.length - 1; i >= 0; i--) {
				html = html + "<li>" + shots[i].score + "</li>"
				shots[i]

			};

			 html = html+ "</ul>";
			var shotsDiv = document.getElementById("shots");
			shotsDiv.innerHTML = html;

		}
	</script>
</body>
</html>
